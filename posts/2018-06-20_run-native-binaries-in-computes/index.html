<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Run Native Binaries in Computes :: Programming Philosophy — Understanding the Fundamental Nature of Programming</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Photo by Ash Edmonds on Unsplash
Thanks to the new whitelist and manifest features of Computes v14.0.0, we can now allow native binaries to run in your network. This allows you to create binaries that can access features that Docker may not offer, especially access to the GPU of the nodes in your Computes network.
This post will show you how to set up a manifest, whitelist, and binaries that can run as tasks on many different operating systems."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/2018-06-20_run-native-binaries-in-computes/" />


<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Run Native Binaries in Computes :: Programming Philosophy — Understanding the Fundamental Nature of Programming" />
<meta name="twitter:description" content="Photo by Ash Edmonds on Unsplash
Thanks to the new whitelist and manifest features of Computes v14.0.0, we can now allow native binaries to run in your network. This allows you to create binaries that can access features that Docker may not offer, especially access to the GPU of the nodes in your Computes network.
This post will show you how to set up a manifest, whitelist, and binaries that can run as tasks on many different operating systems." />
<meta name="twitter:site" content="/" />
<meta name="twitter:creator" content="Jade Meskill" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Run Native Binaries in Computes :: Programming Philosophy — Understanding the Fundamental Nature of Programming">
<meta property="og:description" content="Photo by Ash Edmonds on Unsplash
Thanks to the new whitelist and manifest features of Computes v14.0.0, we can now allow native binaries to run in your network. This allows you to create binaries that can access features that Docker may not offer, especially access to the GPU of the nodes in your Computes network.
This post will show you how to set up a manifest, whitelist, and binaries that can run as tasks on many different operating systems." />
<meta property="og:url" content="/posts/2018-06-20_run-native-binaries-in-computes/" />
<meta property="og:site_name" content="Run Native Binaries in Computes" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2018-06-20 05:33:31.328 &#43;0000 UTC" />









</head>
<body class="dark-theme">
<div class="container">
  <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">programming philosophy</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


  <div class="content">
    
  <div class="post">
    <h2 class="post-title"><a href="/posts/2018-06-20_run-native-binaries-in-computes/">Run Native Binaries in Computes</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2018-06-20
        </span>
      
      <span class="post-author">— Written by Jade Meskill</span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="/tags/golang/">Golang</a>&nbsp;
        
          #<a href="/tags/computes/">Computes</a>&nbsp;
        
          #<a href="/tags/distributed-computing/">Distributed Computing</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      

<p><img src="https://cdn-images-1.medium.com/max/2560/0*yp_KDVvB65ByaXc1" alt="image" /></p>

<p>Photo by <a href="https://unsplash.com/@badashproducts?utm_source=medium&amp;amp;utm_medium=referral">Ash Edmonds</a> on <a href="https://unsplash.com?utm_source=medium&amp;amp;utm_medium=referral">Unsplash</a></p>

<p>Thanks to the new <a href="https://blog.computes.com/protecting-computes-with-whitelists-and-manifests-d146db6e77ba">whitelist and manifest</a> features of Computes v14.0.0, we can now allow native binaries to run in your network. This allows you to create binaries that can access features that Docker may not offer, especially access to the GPU of the nodes in your Computes network.</p>

<p>This post will show you how to set up a manifest, whitelist, and binaries that can run as tasks on many different operating systems.### Binaries for Every Platform</p>

<p>Thanks to the Computes manifest, you can specify different binaries for each platform we support. We’ve created an <a href="https://github.com/computes/bin-echo">example application</a> to help demonstrate.</p>

<h4 id="build-the-example-app">Build the example app</h4>

<p><a href="https://github.com/computes/bin-echo">bin-echo</a> uses <a href="https://goreleaser.com">goreleaser</a> to cross-compile our application for many different platforms. If you’d like to try for yourself, you can build locally using the following command.
<code>goreleaser release --skip-publish --rm-dist --skip-validate</code></p>

<p>This will create a <code>dist/</code> directory with the binary wrapped in an archive.</p>

<h4 id="upload-binaries-to-ipfs">Upload binaries to IPFS</h4>

<p>First, let’s upload each of these binaries to IPFS. The Computes node will use IPFS to download the appropriate binary archive and extract the binary. We support many different archive formats, including <code>tar.gz</code>, <code>zip</code>, <code>tar.bz2</code>, <code>rar</code>, and many more. Using archives allows you to include any necessary dlls, assets, or other files needed for your executable to run.
<code>⟩ ipfs add bin-echo-v1.0.0-* -w  
added QmYYScH89Jwif7cpsE7SLb77oQF8Xue1o5HyDKBQeaYoYk bin-echo-v1.0.0-darwin-amd64.zip  
added QmYxEnsPCEVsgAMQL9Ny4aMHEGZ9rBhNyBHX5SkND27Ns3 bin-echo-v1.0.0-linux-386.tar.gz  
added QmQqnijZGXY6bNHMk159327oQKJy4Ziw7ugUmwWw9w1tDJ bin-echo-v1.0.0-linux-amd64.tar.gz  
added QmRFGEu31iYmkwG73Df9htRkmaYG9syk4ChsLCZvvWixEE bin-echo-v1.0.0-linux-armv7.tar.gz  
added QmZT9t2xpyHhDMAe479t5VbFX9bv9oFshdZ8dCnLdDbQCm bin-echo-v1.0.0-windows-386.zip  
added Qmao7w4wmQYD7qHHR23HGNnPY5gWB7vcHMoZ1tqYAwPCSR bin-echo-v1.0.0-windows-amd64.zip  
added QmatbWWsCucVsJT8HVhsjsj4JnSaGceS44EgxcSaSUXP8p</code></p>

<h4 id="create-the-manifest">Create the Manifest</h4>

<p>The manifest will specify which binary archive to download for each operating system + architecture combination.
<code>{  
  &amp;#34;darwin-amd64&amp;#34;: {  
    &amp;#34;file&amp;#34;: {  
      &amp;#34;/&amp;#34;: &amp;#34;QmYYScH89Jwif7cpsE7SLb77oQF8Xue1o5HyDKBQeaYoYk&amp;#34;  
    },  
    &amp;#34;executable&amp;#34;: &amp;#34;bin-echo&amp;#34;,  
    &amp;#34;format&amp;#34;: &amp;#34;zip&amp;#34;  
  },  
  &amp;#34;linux-amd64&amp;#34;: {  
    &amp;#34;file&amp;#34;: {  
      &amp;#34;/&amp;#34;: &amp;#34;QmQqnijZGXY6bNHMk159327oQKJy4Ziw7ugUmwWw9w1tDJ&amp;#34;  
    },  
    &amp;#34;executable&amp;#34;: &amp;#34;bin-echo&amp;#34;,  
    &amp;#34;format&amp;#34;: &amp;#34;tar.gz&amp;#34;  
  },  
  &amp;#34;linux-386&amp;#34;: {  
    &amp;#34;file&amp;#34;: {  
      &amp;#34;/&amp;#34;: &amp;#34;QmYxEnsPCEVsgAMQL9Ny4aMHEGZ9rBhNyBHX5SkND27Ns3&amp;#34;  
    },  
    &amp;#34;executable&amp;#34;: &amp;#34;bin-echo&amp;#34;,  
    &amp;#34;format&amp;#34;: &amp;#34;tar.gz&amp;#34;  
  },  
  &amp;#34;linux-armv7&amp;#34;: {  
    &amp;#34;file&amp;#34;: {  
      &amp;#34;/&amp;#34;: &amp;#34;QmRFGEu31iYmkwG73Df9htRkmaYG9syk4ChsLCZvvWixEE&amp;#34;  
    },  
    &amp;#34;executable&amp;#34;: &amp;#34;bin-echo&amp;#34;,  
    &amp;#34;format&amp;#34;: &amp;#34;tar.gz&amp;#34;  
  },  
  &amp;#34;windows-386&amp;#34;: {  
    &amp;#34;file&amp;#34;: {  
      &amp;#34;/&amp;#34;: &amp;#34;QmZT9t2xpyHhDMAe479t5VbFX9bv9oFshdZ8dCnLdDbQCm&amp;#34;  
    },  
    &amp;#34;executable&amp;#34;: &amp;#34;bin-echo.exe&amp;#34;,  
    &amp;#34;format&amp;#34;: &amp;#34;zip&amp;#34;  
  },  
  &amp;#34;windows-amd64&amp;#34;: {  
    &amp;#34;file&amp;#34;: {  
      &amp;#34;/&amp;#34;: &amp;#34;Qmao7w4wmQYD7qHHR23HGNnPY5gWB7vcHMoZ1tqYAwPCSR&amp;#34;  
    },  
    &amp;#34;executable&amp;#34;: &amp;#34;bin-echo.exe&amp;#34;,  
    &amp;#34;format&amp;#34;: &amp;#34;zip&amp;#34;  
  }  
}</code></p>

<p><code>file</code> is an IPLD link to the archive containing the binary.</p>

<p><code>executable</code> is the name of the executable contained inside the archive.</p>

<p><code>format</code> is the archive format.</p>

<h4 id="add-manifest-to-ipfs">Add Manifest to IPFS</h4>

<p><code>cat manifest.json | ipfs dag put  
&amp;gt; zdpuAudrVQU58VdxUrZN2irD8qbxgRWqa4ra2DXcAxQRiwfkq</code></p>

<h4 id="create-whitelist">Create Whitelist</h4>

<p><code>{  
  &amp;#34;runners&amp;#34;: {  
    &amp;#34;bin-json-runner&amp;#34;: {  
      &amp;#34;manifests&amp;#34;: [  
        { &amp;#34;/&amp;#34;: &amp;#34;zdpuAudrVQU58VdxUrZN2irD8qbxgRWqa4ra2DXcAxQRiwfkq&amp;#34; }  
      ]  
    }  
  }  
}</code></p>

<h4 id="add-manifest-to-whitelist">Add Manifest to Whitelist</h4>

<p><code>cat whitelist.json | ipfs dag put  
&amp;gt; zdpuAp1FMgjiJ8b5MWVADxQDhx9w66K152972Mw6hH11kaH2x</code>### Example Task
<code>{  
  &amp;#34;input&amp;#34;: {  
    &amp;#34;dataset&amp;#34;: 2  
  },  
  &amp;#34;taskDefinition&amp;#34;: {  
    &amp;#34;runner&amp;#34;: {  
      &amp;#34;type&amp;#34;: &amp;#34;bin-json-runner&amp;#34;,  
      &amp;#34;manifest&amp;#34;: { &amp;#34;/&amp;#34;: &amp;#34;zdpuAp1FMgjiJ8b5MWVADxQDhx9w66K152972Mw6hH11kaH2x&amp;#34; }  
    },  
    &amp;#34;result&amp;#34;: {  
      &amp;#34;action&amp;#34;: &amp;#34;set&amp;#34;,  
      &amp;#34;destination&amp;#34;: {  
        &amp;#34;dataset&amp;#34;: { &amp;#34;/&amp;#34;: &amp;#34;&amp;lt;dataset hash here&amp;gt;&amp;#34; },  
        &amp;#34;path&amp;#34;: &amp;#34;echo/results&amp;#34;  
      }  
    }  
  },  
  &amp;#34;status&amp;#34;: {  
    &amp;#34;/&amp;#34;: &amp;#34;&amp;lt;status hash here&amp;gt;&amp;#34;  
  }  
}</code></p>

<p>Running this task will check the manifest, download the archive for the os+architecture, unpack it, and execute the binary listed in the manifest description.### What’s Next?</p>

<p>Computes will soon use process isolation, chroot, jail, or whatever security features our supported operating systems will allow us to use to keep your nodes safe and secure.</p>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/2018-06-21_with-a-little-help-from-my-friends/">
                <span class="button__icon">←</span>
                <span class="button__text">With a little help from my friends…</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="/posts/2018-06-20_protecting-computes-with-whitelists-and-manifests/">
                <span class="button__text">Protecting Computes with Whitelists and Manifests</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

    </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">programming philosophy</span>
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
        <span>© 2019 Powered by <a href="https://gohugo.io">Hugo</a></span>
        <span>Theme created by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>


  
</div>

</body>
</html>
